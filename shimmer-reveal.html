<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shimmering Pixel-Grid Animation</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: transparent;
            color: #000000;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .reveal-container {
            position: relative;
            width: 80vw;
            height: 80vw;
            max-width: 800px;
            max-height: 800px;
            margin: 2rem auto;
        }

        .reveal-container svg,
        .reveal-container .dot-field {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .reveal-container .dot-field {
            z-index: 1;
        }

        .reveal-container svg {
            z-index: 2;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <div class="reveal-container" style="opacity:0;">
        <svg width="1440" height="1022" viewBox="0 0 1440 1022" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_2064_14670)">
            <rect y="1" width="1440" height="1020" fill="#0D0C14"/>
            <g style="mix-blend-mode:screen" opacity="0.56">
            <path d="M1042.02 -37.651C1035.91 -5.7798 1015.92 27.4621 915.955 44.0649C781.06 66.4682 723.819 87.5644 720.052 177.712C716.273 87.5644 658.94 66.4682 524.046 44.0649C424.076 27.4621 404.086 -5.7798 397.983 -37.651C396.636 -44.6827 402.32 -50.9351 409.479 -50.9351H720.009H720.053H1030.52C1037.68 -50.9351 1043.36 -44.6827 1042.02 -37.651Z" fill="url(#paint0_linear_2064_14670)"/>
            <mask id="mask0_2064_14670" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="397" y="-51" width="646" height="229">
            <path d="M1042.02 -37.651C1035.91 -5.7798 1015.92 27.4621 915.955 44.0649C781.06 66.4682 723.819 87.5644 720.052 177.712C716.273 87.5644 658.94 66.4682 524.046 44.0649C424.076 27.4621 404.086 -5.7798 397.983 -37.651C396.636 -44.6827 402.32 -50.9351 409.479 -50.9351H720.009H720.053H1030.52C1037.68 -50.9351 1043.36 -44.6827 1042.02 -37.651Z" fill="url(#paint1_linear_2064_14670)"/>
            </mask>
            <g mask="url(#mask0_2064_14670)">
            <g style="mix-blend-mode:hard-light" opacity="0.42">
            <path d="M1042.02 -37.651C1035.91 -5.7798 1015.92 27.4621 915.955 44.0649C781.06 66.4682 723.819 87.5644 720.052 177.712C716.273 87.5644 658.94 66.4682 524.046 44.0649C424.076 27.4621 404.086 -5.7798 397.983 -37.651C396.636 -44.6827 402.32 -50.9351 409.479 -50.9351H720.009H720.053H1030.52C1037.68 -50.9351 1043.36 -44.6827 1042.02 -37.651Z" fill="url(#paint2_linear_2064_14670)"/>
            </g>
            <g style="mix-blend-mode:plus-lighter" opacity="0.66" filter="url(#filter0_f_2064_14670)">
            <path d="M946.112 -3.18787C941.827 19.1913 927.79 42.5329 857.594 54.191C762.875 69.922 722.682 84.7353 720.037 148.035C717.383 84.7353 677.125 69.922 582.406 54.191C512.21 42.5329 498.173 19.1913 493.887 -3.18787C492.942 -8.12532 496.933 -12.5156 501.96 -12.5156H720.006H720.037H938.04C943.067 -12.5156 947.058 -8.12532 946.112 -3.18787Z" fill="url(#paint3_linear_2064_14670)"/>
            </g>
            <g style="mix-blend-mode:plus-lighter" opacity="0.66" filter="url(#filter1_f_2064_14670)">
            <path d="M946.112 -3.18787C941.827 19.1913 927.79 42.5329 857.594 54.191C762.875 69.922 722.682 84.7353 720.037 148.035C717.383 84.7353 677.125 69.922 582.406 54.191C512.21 42.5329 498.173 19.1913 493.887 -3.18787C492.942 -8.12534 496.933 -12.5156 501.96 -12.5156H720.006H720.037H938.04C943.067 -12.5156 947.058 -8.12534 946.112 -3.18787Z" fill="url(#paint4_linear_2064_14670)"/>
            </g>
            <g style="mix-blend-mode:plus-lighter" opacity="0.76" filter="url(#filter2_f_2064_14670)">
            <path d="M946.112 -3.18787C941.827 19.1913 927.79 42.5329 857.594 54.191C762.875 69.922 722.682 84.7353 720.037 148.035C717.383 84.7353 677.125 69.922 582.406 54.191C512.21 42.5329 498.173 19.1913 493.887 -3.18787C492.942 -8.12534 496.933 -12.5156 501.96 -12.5156H720.006H720.037H938.04C943.067 -12.5156 947.058 -8.12534 946.112 -3.18787Z" fill="url(#paint5_linear_2064_14670)"/>
            </g>
            <g style="mix-blend-mode:plus-lighter" opacity="0.58" filter="url(#filter3_f_2064_14670)">
            <path d="M946.112 -43.0744C941.827 -12.3748 927.79 19.6451 857.594 35.6376C762.875 57.2173 722.682 77.538 720.037 164.372C717.383 77.538 677.125 57.2173 582.406 35.6376C512.21 19.6451 498.173 -12.3748 493.887 -43.0744C492.942 -49.8476 496.933 -55.8701 501.96 -55.8701H720.006H720.037H938.04C943.067 -55.8701 947.058 -49.8476 946.112 -43.0744Z" fill="url(#paint6_linear_2064_14670)"/>
            </g>
            </g>
            </g>
            <foreignObject x="-40" y="-39" width="1520" height="1100"><div xmlns="http://www.w3.org/1999/xhtml" style="backdrop-filter:blur(20px);clip-path:url(#bgblur_1_2064_14670_clip_path);height:100%;width:100%"></div></foreignObject><g filter="url(#filter4_n_2064_14670)" data-figma-bg-blur-radius="40">
            <path d="M0 1H1440V1021H0V1Z" fill="url(#paint7_radial_2064_14670)" fill-opacity="0.25"/>
            <path d="M0 1H1440V1021H0V1Z" fill="url(#paint8_radial_2064_14670)" fill-opacity="0.15" style="mix-blend-mode:screen"/>
            </g>
            </g>
            <rect x="-0.5" y="0.5" width="1441" height="1021" stroke="url(#paint9_radial_2064_14670)"/>
            <defs>
            <filter id="filter0_f_2064_14670" x="413.748" y="-92.5156" width="612.504" height="320.55" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
            <feGaussianBlur stdDeviation="40" result="effect1_foregroundBlur_2064_14670"/>
            </filter>
            <filter id="filter1_f_2064_14670" x="476.648" y="-29.6156" width="486.704" height="194.75" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
            <feGaussianBlur stdDeviation="8.55" result="effect1_foregroundBlur_2064_14670"/>
            </filter>
            <filter id="filter2_f_2064_14670" x="476.648" y="-29.6156" width="486.704" height="194.75" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
            <feGaussianBlur stdDeviation="8.55" result="effect1_foregroundBlur_2064_14670"/>
            </filter>
            <filter id="filter3_f_2064_14670" x="445.748" y="-103.87" width="548.504" height="316.242" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
            <feGaussianBlur stdDeviation="24" result="effect1_foregroundBlur_2064_14670"/>
            </filter>
            <filter id="filter4_n_2064_14670" x="-40" y="-39" width="1520" height="1100" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
            <feTurbulence type="fractalNoise" baseFrequency="1 1" stitchTiles="stitch" numOctaves="3" result="noise" seed="9948" />
            <feColorMatrix in="noise" type="luminanceToAlpha" result="alphaNoise" />
            <feComponentTransfer in="alphaNoise" result="coloredNoise1">
            <feFuncA type="discrete" tableValues="1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "/>
            </feComponentTransfer>
            <feComposite operator="in" in2="shape" in="coloredNoise1" result="noise1Clipped" />
            <feFlood flood-color="rgba(13, 12, 20, 0.1)" result="color1Flood" />
            <feComposite operator="in" in2="noise1Clipped" in="color1Flood" result="color1" />
            <feMerge result="effect1_noise_2064_14670">
            <feMergeNode in="shape" />
            <feMergeNode in="color1" />
            </feMerge>
            </filter>
            <clipPath id="bgblur_1_2064_14670_clip_path" transform="translate(40 39)"><path d="M0 1H1440V1021H0V1Z"/>
            </clipPath><linearGradient id="paint0_linear_2064_14670" x1="720" y1="17.066" x2="720" y2="207.065" gradientUnits="userSpaceOnUse">
            <stop stop-color="#0E0C15"/>
            <stop offset="0.8" stop-color="#B19AE8"/>
            </linearGradient>
            <linearGradient id="paint1_linear_2064_14670" x1="720" y1="17.066" x2="720" y2="207.065" gradientUnits="userSpaceOnUse">
            <stop stop-color="#0E0C15"/>
            <stop offset="0.8" stop-color="#B19AE8"/>
            </linearGradient>
            <linearGradient id="paint2_linear_2064_14670" x1="720" y1="17.066" x2="720" y2="207.065" gradientUnits="userSpaceOnUse">
            <stop stop-color="#B19AE8" stop-opacity="0"/>
            <stop offset="0.8" stop-color="#B19AE8"/>
            </linearGradient>
            <linearGradient id="paint3_linear_2064_14670" x1="720" y1="35.1712" x2="720" y2="168.646" gradientUnits="userSpaceOnUse">
            <stop stop-color="#6F3FE3" stop-opacity="0.23"/>
            <stop offset="0.8" stop-color="#6F3FE3"/>
            </linearGradient>
            <linearGradient id="paint4_linear_2064_14670" x1="720" y1="35.1712" x2="720" y2="168.646" gradientUnits="userSpaceOnUse">
            <stop stop-color="#6F3FE3" stop-opacity="0"/>
            <stop offset="0.8" stop-color="#6F3FE3"/>
            </linearGradient>
            <linearGradient id="paint5_linear_2064_14670" x1="720" y1="35.1712" x2="720" y2="168.646" gradientUnits="userSpaceOnUse">
            <stop stop-color="#D9C9FF" stop-opacity="0"/>
            <stop offset="0.8" stop-color="#D9C9FF"/>
            </linearGradient>
            <linearGradient id="paint6_linear_2064_14670" x1="720" y1="9.54629" x2="720" y2="192.645" gradientUnits="userSpaceOnUse">
            <stop stop-color="#D9C9FF" stop-opacity="0"/>
            <stop offset="0.8" stop-color="#D9C9FF"/>
            </linearGradient>
            <radialGradient id="paint7_radial_2064_14670" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(720 -57.4035) rotate(62.6262) scale(798.76 730.158)">
            <stop stop-color="#1D1C2B"/>
            <stop offset="1" stop-color="#1D1C2B" stop-opacity="0"/>
            </radialGradient>
            <radialGradient id="paint8_radial_2064_14670" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(720 -14.625) rotate(62.4151) scale(415.865 448.472)">
            <stop stop-color="#4E3CBE" stop-opacity="0.26"/>
            <stop offset="1" stop-color="#181920" stop-opacity="0"/>
            </radialGradient>
            <radialGradient id="paint9_radial_2064_14670" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(720 1.00001) rotate(90) scale(343.483 678.283)">
            <stop stop-color="#B19AE8"/>
            <stop offset="1" stop-color="#B19AE8" stop-opacity="0"/>
            </radialGradient>
            <clipPath id="clip0_2064_14670">
            <rect y="1" width="1440" height="1020" fill="white"/>
            </clipPath>
            </defs>
            </svg>


        <div class="dot-field"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.9/dat.gui.min.js"
        integrity="sha512-WoO4Ih0CDOSLYafy22wZD/mcJ7k0ESLqtQsFa6zFKnEUrbtuGU+GkLtVhgt93xa2qewG5gKEC6CWlN8OaCTSVg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script type="module">
        const container = document.querySelector('.dot-field');

        const app = new PIXI.Application({

            width: container.clientWidth,

            height: container.clientHeight,

            backgroundColor: 0x0D0C14,

            backgroundAlpha: 1,

            antialias: true,

            autoDensity: true,

            resolution: window.devicePixelRatio,

        });

        container.appendChild(app.view);

        const fragmentShader = `

            precision mediump float;

            varying vec2 vTextureCoord;

            uniform vec2 uResolution;

            uniform float uMinGridSize;
            uniform float uMaxGridSize;

            uniform float uTime;

            uniform float uRevealProgress;

            uniform vec2 uCircleOffset;
            uniform float uCircleEdgeSoftness;

            uniform vec2 uLightPositions[3];
            uniform float uLightIntensities[3];
            uniform float uLightRadius;

            uniform float uEdgeTransitionRange;

            uniform float uBlurStart;
            uniform float uBlurRange;
            uniform float uDistantOpacity;
            uniform float uVerticalFalloff;

            void main() {

                vec2 coord = vTextureCoord * uResolution;

                // Global circle mask setup

                vec2 canvasCenter = uResolution / 2.0 + uCircleOffset;
                float circleRadius = min(uResolution.x, uResolution.y) * 0.6 * uRevealProgress;
                float circleEdge = circleRadius * uCircleEdgeSoftness;

                float distToCenter = length(coord - canvasCenter);

                float circleMask = smoothstep(circleRadius, circleRadius - circleEdge, distToCenter);

                // Soft circular mask without gooey

                float gridFactor = smoothstep(circleRadius - uEdgeTransitionRange, circleRadius, distToCenter);
                gridFactor *= (1.0 - smoothstep(circleRadius, circleRadius + 1.0, distToCenter));
                float gridSize = mix(uMinGridSize, uMaxGridSize, gridFactor);

                float squareSize = 1.5;

                float gap = (gridSize - squareSize) / 2.0;

                float radius = squareSize / 2.0;

                vec2 cell = floor(coord / gridSize);

                vec2 posInCell = mod(coord, gridSize);

                vec2 center = vec2(gridSize / 2.0, gridSize / 2.0);

                vec2 diff = abs(posInCell - center);

                float maxDiff = max(diff.x, diff.y);

                float edge = 0.2;

                float mask = smoothstep(radius + edge, radius - edge, maxDiff);

                float random = fract(sin(dot(cell, vec2(12.9898, 78.233))) * 43758.5453);

                vec3 bgColor = vec3(13.0/255.0, 12.0/255.0, 20.0/255.0);
                vec3 dotColor = vec3(126.0/255.0, 101.0/255.0, 187.0/255.0);

                 float distFromCenter = length(coord - canvasCenter);
                 float distFactor = smoothstep(0.0, circleRadius, distFromCenter);
                 float verticalFactor = 1.0 - (coord.y / uResolution.y);
                 verticalFactor = pow(verticalFactor, uVerticalFalloff);
                 float baseOpacity = 0.5 + 0.5 * sin(uTime * 2.0 + random * 6.28318);
                 float fadeOpacity = baseOpacity * (1.0 - distFactor) * verticalFactor * uDistantOpacity;
                 float blurFactor = uBlurStart + distFactor * uBlurRange;
                 float fadeMask = smoothstep(radius + blurFactor, radius - blurFactor, maxDiff);
                 vec3 innerColor = mix(bgColor, dotColor, fadeMask * fadeOpacity);

                // Add separate light effects blended into dots
                for(int i = 0; i < 3; i++) {
                    float lightDist = length(coord - uLightPositions[i]);
                    float lightMask = smoothstep(uLightRadius, uLightRadius - 110.0, lightDist);
                    innerColor += dotColor * lightMask * uLightIntensities[i] * mask;
                }

                vec3 color = mix(bgColor, innerColor, circleMask);

                gl_FragColor = vec4(color, 1.0);

            }

        `;

        const uniforms = {

            uMinGridSize: 3.4,
            uMaxGridSize: 3.4,

            uResolution: [app.screen.width, app.screen.height],

            uTime: 0.0,

            uRevealProgress: 0.0,

            uCircleOffset: new Float32Array([0.0, 0.0]),
            uCircleEdgeSoftness: 1.0,

            uLightPositions: new Float32Array([0, 0, 0, 0, 0, 0]),
            uLightIntensities: [0, 0, 0],
            uLightRadius: 100.0,

            uEdgeTransitionRange: 150.0,

            uBlurStart: 0.2,
            uBlurRange: 0.5,
            uDistantOpacity: 1.0,
            uVerticalFalloff: 1.0,

        };

        const filter = new PIXI.Filter(undefined, fragmentShader, uniforms);

        const rect = new PIXI.Graphics();

        rect.beginFill(0x0D0C14);

        rect.drawRect(0, 0, app.screen.width, app.screen.height);

        rect.endFill();

        rect.filters = [filter];

        app.stage.addChild(rect);

        // --- Begin: SVG Path Mask for Shimmer Visibility ---
        // Replicate the main SVG path as a PIXI.Graphics mask
        const maskGraphics = new PIXI.Graphics();

        function drawMask() {
            maskGraphics.clear();
            maskGraphics.beginFill(0xffffff);
            // SVG viewBox: 0 0 827 509
            // Scale to current canvas size
            const sx = app.screen.width / 827;
            const sy = app.screen.height / 509;
            maskGraphics.moveTo(826.472 * sx, 141.037 * sy);
            maskGraphics.bezierCurveTo(818.644 * sx, 181.915 * sy, 793.004 * sx, 224.551 * sy, 664.785 * sx, 245.845 *
                sy);
            maskGraphics.bezierCurveTo(491.771 * sx, 274.579 * sy, 418.355 * sx, 301.637 * sy, 413.523 * sx, 417.26 *
                sy);
            maskGraphics.bezierCurveTo(408.676 * sx, 301.637 * sy, 335.141 * sx, 274.579 * sy, 162.127 * sx, 245.845 *
                sy);
            maskGraphics.bezierCurveTo(33.9079 * sx, 224.551 * sy, 8.26807 * sx, 181.915 * sy, 0.440452 * sx, 141.037 *
                sy);
            maskGraphics.bezierCurveTo(-1.28654 * sx, 132.018 * sy, 6.00315 * sx, 123.999 * sy, 15.1858 * sx, 123.999 *
                sy);
            maskGraphics.lineTo(413.467 * sx, 123.999 * sy);
            maskGraphics.lineTo(413.524 * sx, 123.999 * sy);
            maskGraphics.lineTo(811.727 * sx, 123.999 * sy);
            maskGraphics.bezierCurveTo(820.909 * sx, 123.999 * sy, 828.199 * sx, 132.018 * sy, 826.472 * sx, 141.037 *
                sy);
            maskGraphics.endFill();
        }
        drawMask();
        rect.mask = maskGraphics;
        app.stage.addChild(maskGraphics);
        // Responsive scaling for mask
        window.addEventListener('resize', () => {
            drawMask();
        });
        // --- End: SVG Path Mask for Shimmer Visibility ---

        window.addEventListener('resize', () => {

            app.renderer.resize(container.clientWidth, container.clientHeight);

            uniforms.uResolution = [app.screen.width, app.screen.height];

            rect.width = app.screen.width;

            rect.height = app.screen.height;

        });

        let time = 0;

        app.ticker.add((delta) => {

            time += delta / 60;

            uniforms.uTime = time;

        });

        // Define spawnLight function
        function spawnLight(index) {
            const centerX = app.screen.width / 2;
            const centerY = app.screen.height / 2;
            const minDim = Math.min(app.screen.width, app.screen.height);
            const minDistFromCenter = minDim * 0.2;
            const minDistFromOthers = minDim * 0.15;
            let x, y;
            let valid = false;
            while (!valid) {
                x = Math.random() * app.screen.width;
                y = Math.random() * app.screen.height;
                const distCenter = Math.sqrt((x - centerX) ** 2 + (y - centerY) ** 2);
                if (distCenter < minDistFromCenter) continue;
                valid = true;
                for (let i = 0; i < 3; i++) {
                    if (i === index) continue;
                    const otherX = uniforms.uLightPositions[i * 2];
                    const otherY = uniforms.uLightPositions[i * 2 + 1];
                    if (uniforms.uLightIntensities[i] > 0) {
                        const distOther = Math.sqrt((x - otherX) ** 2 + (y - otherY) ** 2);
                        if (distOther < minDistFromOthers) {
                            valid = false;
                            break;
                        }
                    }
                }
            }
            uniforms.uLightPositions[index * 2] = x;
            uniforms.uLightPositions[index * 2 + 1] = y;
            gsap.timeline({
                    onComplete: () => spawnLight(index)
                })
                .to(uniforms.uLightIntensities, {
                    [index]: 1,
                    duration: 1.5,
                    ease: "power2.inOut"
                })
                .to(uniforms.uLightIntensities, {
                    [index]: 0,
                    duration: 1.5,
                    ease: "power2.inOut",
                    delay: Math.random() * 2 + 1
                });
        }

        gsap.registerPlugin(ScrollTrigger);

        gsap.to(".reveal-container", {
            opacity: 1,
            duration: 1.5,
            ease: "power3.out",
            scrollTrigger: {
                trigger: ".reveal-container",
                start: "top 80%",
                once: true,
            },
            onComplete: () => {
                spawnLight(0);
                setTimeout(() => spawnLight(1), 1000);
                setTimeout(() => spawnLight(2), 2000);
            }
        });
        gsap.to(uniforms, {
            uRevealProgress: 1,
            duration: 1.5,
            ease: "power3.out",
            scrollTrigger: {
                trigger: ".reveal-container",
                start: "top 80%",
                once: true,
            }
        });

        const controls = {
            minGridSize: 3.4,
            maxGridSize: 3.4,
            lightRadius: 100.0,
            revealProgress: 0.0,
            circleOffsetX: 0.0,
            circleOffsetY: 0.0,
            circleEdgeSoftness: 1.0,
            edgeTransitionRange: 150.0,
            blurStart: 0.2,
            blurRange: 0.5,
            distantOpacity: 1.0,
            verticalFalloff: 1.0
        };
        const gui = new dat.GUI();

        const mainRevealFolder = gui.addFolder('Main Reveal');
        mainRevealFolder.add(controls, 'revealProgress', 0.0, 1.0, 0.01).name('Reveal Progress').onChange(v => {
            uniforms.uRevealProgress = v;
        });
        mainRevealFolder.add(controls, 'circleEdgeSoftness', 0.1, 2.0).name('Edge Softness').onChange(v => {
            uniforms.uCircleEdgeSoftness = v;
        });
        mainRevealFolder.open();

        const circleFolder = gui.addFolder('Circle Position');
        circleFolder.add(controls, 'circleOffsetX', -400, 400).name('X Offset').onChange(v => {
            uniforms.uCircleOffset[0] = v;
        });
        circleFolder.add(controls, 'circleOffsetY', -400, 400).name('Y Offset').onChange(v => {
            uniforms.uCircleOffset[1] = v;
        });
        circleFolder.open();

        const gridFolder = gui.addFolder('Grid Density');
        gridFolder.add(controls, 'minGridSize', 1.0, 20.0).name('Center Size').onChange(v => {
            uniforms.uMinGridSize = v;
        });
        gridFolder.add(controls, 'maxGridSize', 1.0, 20.0).name('Edge Size').onChange(v => {
            uniforms.uMaxGridSize = v;
        });
        gridFolder.add(controls, 'edgeTransitionRange', 50, 300).name('Edge Transition').onChange(v => {
            uniforms.uEdgeTransitionRange = v;
        });
        gridFolder.open();

        gui.add(controls, 'lightRadius', 50.0, 200.0).onChange(v => {
            uniforms.uLightRadius = v;
        });

        const distantFolder = gui.addFolder('Distant Grid');
        distantFolder.add(controls, 'blurStart', 0.0, 1.0).name('Min Blur').onChange(v => {
            uniforms.uBlurStart = v;
        });
        distantFolder.add(controls, 'blurRange', 0.0, 2.0).name('Blur Range').onChange(v => {
            uniforms.uBlurRange = v;
        });
        distantFolder.add(controls, 'distantOpacity', 0.0, 1.0).name('Opacity').onChange(v => {
            uniforms.uDistantOpacity = v;
        });
        distantFolder.add(controls, 'verticalFalloff', 0.1, 5.0).name('Vertical Falloff').onChange(v => {
            uniforms.uVerticalFalloff = v;
        });
        distantFolder.open();
    </script>
</body>

</html>
